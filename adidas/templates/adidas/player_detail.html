{% extends "base.html" %}
{% load thumbnail static %}

{% block head_title %}Il tuo profilo{% endblock %}

{% block title %}Il tuo profilo{% endblock title %}
{% block subtitle %}Qui puoi gestire le tue informazioni personali ed i tuoi account social{% endblock subtitle %}

{% block content %}

<div class="col s12 m8 offset-m2 l6 offset-l3">
  <div class="card-panel grey lighten-5 z-depth-1">
    <div class="row valign-wrapper">
      <div class="col s2">
          {% thumbnail player.image "50x50" crop="center" as im %}
            <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" class="circle responsive-img"/>
          {% empty %}
            <img src="{% static 'adidas/img/no_profile_image_50x50.png' %}" width="50" height="50" class="circle responsive-img"/>
          {% endthumbnail %}
      </div>
      <div class="col s10">
        <span class="black-text">
          <h2>Benvenuto {{ player.username }}</h2>
        </span>
      </div>
    </div>
  </div>
</div>

<div class="team-memberships">
    {% for membership in memberships %}
    <div class="card horizontal">
        <div class="card-stacked">
            <div class="card-content">
                <p>Team: {{ membership.team.name }}</p>
            </div>
            <!--div class="card-action">
                <a href="#">This is a link</a>
            </div-->
        </div>
    </div>
    {% endfor %}
</div>

<div class="social-engagement">
{% with player.stars as stars %}
Your social engagement is
{% for count in '12345' %}
    {% if forloop.counter > stars %}
         <i class="material-icons grey-text text-lighten-2">star</i>
    {% else %}
         <i class="material-icons yellow-text text-darken-1">star</i>
    {% endif %}
{% endfor %}
{% endwith %}
</div>

<div class="social-recap">
    <table>
        <tr>
            <th>Testo</th>
            <th>Commenti</th>
            <th>Likes</th>
            <th>Condivisioni</th>
            <th>Punti</th>
        </tr>
    {% for post in player.post_set.all %}
    <tr>
        <td>{{ post.text|truncatewords_html:50 }}</td>
        <td>{{ post.comments }}</td>
        <td>{{ post.likes }}</td>
        <td>{{ post.shares }}</td>
        <td>{{ post.points }}</td>
    </tr>
    {% endfor %}
    </table>
</div>

<a class="btn waves-effect waves-light" href="{% url 'profile_update' %}">Modifica il profilo</a>
<a class="btn waves-effect waves-light" href="{% url 'account_change_password' %}">Cambia la password</a>
<a class="btn waves-effect waves-light" href="{% url 'account_email' %}">Cambia la mail</a>
<a class="btn waves-effect waves-light" href="{% url 'socialaccount_connections' %}">Connetti profili social</a>
{% endblock %}
